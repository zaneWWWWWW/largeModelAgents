# å¿ƒç†çŠ¶æ€è¯„ä¼°æ¨¡å‹

ç”¨äºå¿ƒç†çŠ¶æ€è¯„ä¼°çš„å¾®è°ƒæ¨¡å‹ï¼Œè¾“å‡º JSON æ ¼å¼çš„å¿ƒç†è¯„ä¼°ç»“æœã€‚

## ğŸ“– é¡¹ç›®ç®€ä»‹

è¯¥æ¨¡å‹ç”¨äºè¯„ä¼°ç”¨æˆ·çš„å¿ƒç†çŠ¶æ€ï¼ŒåŸºäºå¯¹è¯å†…å®¹è¾“å‡ºç»“æ„åŒ–çš„è¯„ä¼°ç»“æœï¼ŒåŒ…æ‹¬ï¼š
- æŠ‘éƒç¨‹åº¦è¯„ä¼°
- ç„¦è™‘ç¨‹åº¦è¯„ä¼°
- é£é™©ç­‰çº§æ ‡è®°
- å›°æ‰°åˆ†æ•°

## ğŸ“ ç›®å½•ç»“æ„

```
assessment/
â”œâ”€â”€ data/                           # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ datasets/                   # è®­ç»ƒæ•°æ®é›†
â”‚   â”‚   â”œâ”€â”€ train/                  # è®­ç»ƒé›†
â”‚   â”‚   â”œâ”€â”€ valid/                  # éªŒè¯é›†
â”‚   â”‚   â”œâ”€â”€ test/                   # æµ‹è¯•é›†
â”‚   â”‚   â””â”€â”€ metadata/               # å…ƒæ•°æ®
â”‚   â”œâ”€â”€ processed/                  # å¤„ç†åæ•°æ®
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ docs/                           # æŠ€æœ¯æ–‡æ¡£
â”‚   â”œâ”€â”€ finetune_plan.md            # å¾®è°ƒè®¡åˆ’
â”‚   â”œâ”€â”€ steps.md                    # å®éªŒæ­¥éª¤
â”‚   â”œâ”€â”€ EXPORT_QUANTIZE_GUIDE.md    # å¯¼å‡ºé‡åŒ–æŒ‡å—
â”‚   â”œâ”€â”€ QUANTIZATION_SUMMARY.md     # é‡åŒ–æ€»ç»“
â”‚   â””â”€â”€ label_system.md             # æ ‡æ³¨ä½“ç³»è¯´æ˜
â”œâ”€â”€ labeling/                       # æ•°æ®æ ‡æ³¨
â”‚   â”œâ”€â”€ scripts/                    # æ ‡æ³¨è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ run_labeling.py         # ä¸»æ ‡æ³¨è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ split_jsonl.py          # æ•°æ®åˆ†å‰²
â”‚   â”‚   â”œâ”€â”€ provider_*.py           # å„LLMæä¾›è€…
â”‚   â”‚   â””â”€â”€ common.py               # å…¬å…±å‡½æ•°
â”‚   â”œâ”€â”€ prompts/                    # æ ‡æ³¨æç¤ºè¯
â”‚   â”‚   â””â”€â”€ min_instruction.txt
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ scripts/                        # è®­ç»ƒä¸æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ train_llf_*.sh              # å„ç§è®­ç»ƒè„šæœ¬
â”‚   â”œâ”€â”€ test_*.py                   # æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ merge_lora.py               # åˆå¹¶LoRAæƒé‡
â”‚   â”œâ”€â”€ convert_*.sh                # è½¬æ¢è„šæœ¬
â”‚   â”œâ”€â”€ infer.py                    # æ¨ç†è„šæœ¬
â”‚   â””â”€â”€ json_postprocessor.py       # JSONåå¤„ç†
â”œâ”€â”€ saves/                          # è®­ç»ƒä¿å­˜ç‚¹
â”‚   â””â”€â”€ mindchat-qwen2-05b/
â”‚       â”œâ”€â”€ lora/                   # LoRAæƒé‡
â”‚       â””â”€â”€ dora/                   # DoRAæƒé‡
â”œâ”€â”€ results/                        # å®éªŒç»“æœ
â”‚   â”œâ”€â”€ training_analysis.md
â”‚   â”œâ”€â”€ mental_assessment_test.json
â”‚   â””â”€â”€ *.json
â”œâ”€â”€ logs/                           # è®­ç»ƒæ—¥å¿—
â”œâ”€â”€ LLaMA-Factory-main/             # è®­ç»ƒæ¡†æ¶ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ README.md
```

## ğŸ› ï¸ æŠ€æœ¯è§„æ ¼

| é¡¹ç›® | è§„æ ¼ |
|------|------|
| åŸºåº§æ¨¡å‹ | Qwen2.5-0.5B-Instruct |
| å¾®è°ƒæ–¹æ³• | LoRA / DoRA |
| è®­ç»ƒæŒ‡æ ‡ | train_loss: 0.0812, 3 epochs |
| è¾“å‡ºæ ¼å¼ | JSONæ ¼å¼å¿ƒç†è¯„ä¼°ç»“æœ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ•°æ®æ ‡æ³¨
```bash
cd labeling/scripts
python run_labeling.py
```

### è®­ç»ƒæ¨¡å‹
```bash
cd scripts
./train_llf_mindchat_qwen2_05b.sh
```

### æµ‹è¯•æ¨¡å‹
```bash
python scripts/test_model.py
```

### åˆå¹¶æƒé‡
```bash
python scripts/merge_lora.py
```

### è½¬æ¢ä¸º GGUF
```bash
./scripts/convert_to_gguf.sh
```

## ğŸ“Š è¾“å‡ºç¤ºä¾‹

è¾“å…¥å¯¹è¯ï¼š
```
ç”¨æˆ·ï¼šæˆ‘æœ€è¿‘ç»å¸¸å¤±çœ ï¼Œæ„Ÿè§‰å¾ˆç´¯ï¼Œå¯¹ä»€ä¹ˆéƒ½æä¸èµ·å…´è¶£ã€‚
```

æ¨¡å‹è¾“å‡ºï¼š
```json
{
  "depression_level": "moderate",
  "anxiety_level": "mild",
  "risk_flag": false,
  "distress_score": 6,
  "summary": "ç”¨æˆ·è¡¨ç°å‡ºä¸­åº¦æŠ‘éƒç—‡çŠ¶ï¼ŒåŒ…æ‹¬ç¡çœ é—®é¢˜å’Œå…´è¶£ç¼ºå¤±"
}
```

## ğŸ“ æ•°æ®æ ‡æ³¨ä½“ç³»

### æ ‡æ³¨ç»´åº¦
1. **æŠ‘éƒç¨‹åº¦** (depression_level): none / mild / moderate / severe
2. **ç„¦è™‘ç¨‹åº¦** (anxiety_level): none / mild / moderate / severe
3. **é£é™©æ ‡è®°** (risk_flag): true / false
4. **å›°æ‰°åˆ†æ•°** (distress_score): 0-10

### æ ‡æ³¨æµç¨‹
1. æ•°æ®æ¸…æ´—ï¼šå»é‡ã€è¿‡æ»¤æ— æ•ˆæ ·æœ¬
2. è‡ªåŠ¨æ ‡æ³¨ï¼šä½¿ç”¨ LLM API æ‰¹é‡æ ‡æ³¨
3. äººå·¥å®¡æ ¸ï¼šæŠ½æ ·éªŒè¯æ ‡æ³¨è´¨é‡
4. æ ¼å¼è½¬æ¢ï¼šè½¬ä¸º SFT è®­ç»ƒæ ¼å¼

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¾®è°ƒè®¡åˆ’](docs/finetune_plan.md)
- [å®éªŒæ­¥éª¤](docs/steps.md)
- [å¯¼å‡ºé‡åŒ–æŒ‡å—](docs/EXPORT_QUANTIZE_GUIDE.md)
- [æ ‡æ³¨ä½“ç³»è¯´æ˜](docs/label_system.md)

## ğŸ”— ä¸ App é›†æˆ

è¯„ä¼°æ¨¡å‹åœ¨ Android App ä¸­ä½œä¸º `PsychologicalAssessmentTool` é›†æˆï¼Œç”± Agent æ¡†æ¶è°ƒç”¨è¿›è¡Œå¿ƒç†çŠ¶æ€è¯„ä¼°ã€‚

---

**æœ€åæ›´æ–°**: 2025-12
